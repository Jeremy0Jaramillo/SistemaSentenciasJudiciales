<app-header></app-header>

<div class="datos-est">
  <p class="dat"><strong> NÚMERO PROCESO: </strong> {{ numero_proceso }}</p>
  <p class="dat"><strong> ASUNTO: </strong> {{ asunto }}</p>
  <p class="dat"><strong> ESTUDIANTE: </strong> {{ estudiante }} </p>
  <p class="dat"><strong> DOCENTE: </strong> {{ docente }}</p>
</div>

<div class="eva">
  <form [formGroup]="evaluacionForm" (ngSubmit)="submitForm()">

  <h3 class="titulo-analisis">Cuestionarios de estándar de suficiencia de la motivación </h3>

    <div *ngIf="evaluacionForm.disabled" class="locked-message">
      Esta sentencia está bloqueada y no puede ser editada.
  </div>
  
    <div>
      <h3 class="titulo" for="motivationType">Tipo de Motivación</h3>
      <h5 class="titulo">En caso de identificar deficiencia motivacional en la sentencia, seleccione solamente uno de
        los siguientes tipos</h5>

        <div>
          <h3 class="titulo">Tipo de motivación</h3>
          <h5 class="titulo">Por favor, seleccione una opción</h5>
          <div class="options">
            <div>
              <input type="radio" id="nonexistinence" name="motivationType" value="nonexistinence" formControlName="motivationType">
              <label for="nonexistinence">Inexistencia</label>
            </div>
            <div>
              <input type="radio" id="insufficiency" name="motivationType" value="insufficiency" formControlName="motivationType">
              <label for="insufficiency">Insuficiencia</label>
            </div>
            <div>
              <input type="radio" id="appearance" name="motivationType" value="appearance" formControlName="motivationType">
              <label for="appearance">Apariencia</label>
            </div>
          </div>
        </div>
      <button class="rate" *ngIf="isDocente" type="button"
        (click)="toggleCalificar('motivationType')">Calificar</button>
      <div *ngIf="calificarState['motivationType']">
        <div class="bttns-rate">
          <button class="correct-button"
            [class.calificacion-correcta]="isButtonSelected('motivationType', 'motivationType_calificacion', 'Correcto')"
            type="button" (click)="selectButton('motivationType', 'motivationType_calificacion', 'Correcto')">
            Correcto
          </button>
          <button class="incorrect-button"
            [class.calificacion-incorrecta]="isButtonSelected('motivationType', 'motivationType_calificacion', 'Incorrecto')"
            type="button" (click)="selectButton('motivationType', 'motivationType_calificacion', 'Incorrecto')">
            Incorrecto
          </button>
        </div>
        <div>
          <app-caja-texto formControlName="motivationType_retroalimentacion"
            [titulo]="'Retroalimentación'"></app-caja-texto>
        </div>
      </div>
      <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
        <div class="calificacion-display" [ngClass]="{
          'calificacion-correcta': getCalificacionValue('motivationType_calificacion') === 'Correcto',
          'calificacion-incorrecta': getCalificacionValue('motivationType_calificacion') === 'Incorrecto',
          'calificacion-no-calificado': getCalificacionValue('motivationType_calificacion') === 'No Calificado'
        }">
          {{ getCalificacionValue('motivationType_calificacion') }}
        </div>
      </div>
    </div>
    <hr>
    <!-- Formulario de inexistencia -->
    <div [hidden]="evaluacionForm.get('motivationType')?.value !== 'nonexistinence'" formGroupName="nonexistinence">
      <h2 class="titulo">Inexistencia</h2>
    <!-- Fundamentacion normativa en formulario de inexistencia -->
      <h3 class="titulo">Fundamentación normativa</h3>
      <div>
        <h4 class="titulo-eva">¿Carece totalmente de fundamentación normativa?</h4>
        <label>
          <input type="radio" 
                 [value]="'Si'" 
                 [checked]="isRadioSelected('nonexistinence.lackFoundationNormative', 'Si')"
                 (change)="setRadioValue('nonexistinence.lackFoundationNormative', 'Si')"
                 formControlName="lackFoundationNormative"> Si
        </label>
        <label>
          <input type="radio" 
                 [value]="'No'" 
                 [checked]="isRadioSelected('nonexistinence.lackFoundationNormative', 'No')"
                 (change)="setRadioValue('nonexistinence.lackFoundationNormative', 'No')"
                 formControlName="lackFoundationNormative"> No
        </label>      </div>
      <div>
        <app-caja-texto name="reasonsNormative" [disabled]="evaluacionForm.disabled" formControlName="reasonsNormative"
          [titulo]="'¿Por qué?'">
        </app-caja-texto>
      </div>
      <div *ngIf="!isDocente && getRetroalimentacionValue('nonexistinence.normative_retroalimentacion')">
        <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
          {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
        </button>
        <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
          <div class="retroalimentacion-texto">
            {{ getRetroalimentacionValue('nonexistinence.normative_retroalimentacion') }}
          </div>
        </div>
      </div>
      <button class="rate" *ngIf="isDocente" type="button"
        (click)="toggleCalificar('nonexistinence.reasonsNormative')">Calificar</button>
      <div *ngIf="calificarState['nonexistinence.reasonsNormative']">
        <div class="bttns-rate">
          <button class="correct-button"
            [class.calificacion-correcta]="isButtonSelected('nonexistinence', 'normative_calificacion', 'Correcto')"
            type="button"
            (click)="selectButton('nonexistinence', 'normative_calificacion', 'Correcto')">Correcto</button>
          <button class="incorrect-button"
            [class.calificacion-incorrecta]="isButtonSelected('nonexistinence', 'normative_calificacion', 'Incorrecto')"
            type="button"
            (click)="selectButton('nonexistinence', 'normative_calificacion', 'Incorrecto')">Incorrecto</button>
        </div>
        <div>
          <div>
            <app-caja-texto formControlName="normative_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
      </div>
      <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
        <div class="calificacion-display" [ngClass]="{
          'calificacion-correcta': getCalificacionValue('nonexistinence.normative_calificacion') === 'Correcto',
          'calificacion-incorrecta': getCalificacionValue('nonexistinence.normative_calificacion') === 'Incorrecto',
          'calificacion-no-calificado': getCalificacionValue('nonexistinence.normative_calificacion') === 'No Calificado'
        }">
          {{ getCalificacionValue('nonexistinence.normative_calificacion') }}
        </div>
      </div>
      <hr>
      <!-- Fundamentacion fatica en formulario de inexistencia -->
      <h3 class="titulo">Fundamentación fáctica</h3>
      <div>
        <h4 class="titulo-eva">¿Carece totalmente de fundamentación fáctica?</h4>
        <label>
          <input type="radio" 
                 [value]="'Si'" 
                 [checked]="isRadioSelected('lackFoundationFactual', 'Si')" 
                 (change)="setRadioValue('lackFoundationFactual', 'Si')" 
                 formControlName="lackFoundationFactual"> Si
      </label>
      <label>
          <input type="radio" 
                 [value]="'No'" 
                 [checked]="isRadioSelected('lackFoundationFactual', 'No')" 
                 (change)="setRadioValue('lackFoundationFactual', 'No')" 
                 formControlName="lackFoundationFactual"> No
      </label>
            </div>
      <div>
        <app-caja-texto name="reasonsFactual" [disabled]="evaluacionForm.disabled" formControlName="reasonsFactual"
          [titulo]="'¿Por qué?'">
        </app-caja-texto>
      </div>
      <div *ngIf="!isDocente && getRetroalimentacionValue('nonexistinence.factual_retroalimentacion')">
        <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
          {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
        </button>
        <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
          <div class="retroalimentacion-texto">
            {{ getRetroalimentacionValue('nonexistinence.factual_retroalimentacion') }}
          </div>
        </div>
      </div>
      <button class="rate" *ngIf="isDocente" type="button"
        (click)="toggleCalificar('nonexistinence.reasonsFactual')">Calificar</button>
      <div *ngIf="calificarState['nonexistinence.reasonsFactual']">
        <div class="bttns-rate">
          <button class="correct-button"
            [class.calificacion-correcta]="isButtonSelected('nonexistinence', 'factual_calificacion', 'Correcto')"
            type="button" (click)="selectButton('nonexistinence', 'factual_calificacion', 'Correcto')">Correcto</button>
          <button class="incorrect-button" type="button"
            [class.calificacion-incorrecta]="isButtonSelected('nonexistinence', 'factual_calificacion', 'Incorrecto')"
            (click)="selectButton('nonexistinence', 'factual_calificacion', 'Incorrecto')">Incorrecto</button>
        </div>
        <div>
          <app-caja-texto formControlName="factual_retroalimentacion" [titulo]="'Retroalimentación'"></app-caja-texto>
        </div>
      </div>
      <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
        <div class="calificacion-display" *ngIf="saved" [ngClass]="{
          'calificacion-correcta': getCalificacionValue('nonexistinence.factual_calificacion') === 'Correcto',
          'calificacion-incorrecta': getCalificacionValue('nonexistinence.factual_calificacion') === 'Incorrecto',
          'calificacion-no-calificado': getCalificacionValue('nonexistinence.factual_calificacion') === 'No Calificado'
        }">
          {{ getCalificacionValue('nonexistinence.factual_calificacion') }}
        </div>
      </div>
      <hr>
      <!-- Señalar si la sentencia deberia ser analizada en formulario de inexistencia -->
      <div>
        <h3 class="titulo">Señale si la sentencia analizada debe ser anulada por déficit de motivación</h3>
        <label>
          <input type="radio" 
                 [value]="'Si'" 
                 [checked]="isRadioSelected('lackMotivation', 'Si')" 
                 (change)="setRadioValue('lackMotivation', 'Si')" 
                 formControlName="lackMotivation"> Si
      </label>
      <label>
          <input type="radio" 
                 [value]="'No'" 
                 [checked]="isRadioSelected('lackMotivation', 'No')" 
                 (change)="setRadioValue('lackMotivation', 'No')" 
                 formControlName="lackMotivation"> No
      </label>
      
      </div>
      <div>
        <app-caja-texto formControlName="reasonsMotivation" [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
        </app-caja-texto>
      </div>
      <button class="rate" *ngIf="isDocente" type="button"
        (click)="toggleCalificar('nonexistinence.reasonsMotivation')">Calificar</button>
      <div *ngIf="calificarState['nonexistinence.reasonsMotivation']">
        <div class="bttns-rate">
          <button class="correct-button" type="button"
            [class.calificacion-correcta]="isButtonSelected('nonexistinence', 'motivation_calificacion', 'Correcto')"
            (click)="selectButton('nonexistinence', 'motivation_calificacion', 'Correcto')">Correcto</button>
          <button class="incorrect-button" type="button"
            [class.calificacion-incorrecta]="isButtonSelected('nonexistinence', 'motivation_calificacion', 'Incorrecto')"
            (click)="selectButton('nonexistinence', 'motivation_calificacion', 'Incorrecto')">Incorrecto</button>
        </div>
        <div>
          <app-caja-texto formControlName="motivation_retroalimentacion" [titulo]="'Retroalimentación'">
          </app-caja-texto>
        </div>
      </div>
      <div *ngIf="!isDocente && getRetroalimentacionValue('nonexistinence.motivation_retroalimentacion')">
        <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
          {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
        </button>
        <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
          <div class="retroalimentacion-texto">
            {{ getRetroalimentacionValue('nonexistinence.motivation_retroalimentacion') }}
          </div>
        </div>
      </div>
      <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
        <div class="calificacion-display" *ngIf="saved" [ngClass]="{
          'calificacion-correcta': getCalificacionValue('nonexistinence.motivation_calificacion') === 'Correcto',
          'calificacion-incorrecta': getCalificacionValue('nonexistinence.motivation_calificacion') === 'Incorrecto',
          'calificacion-no-calificado': getCalificacionValue('nonexistinence.motivation_calificacion') === 'No Calificado'
        }">
          {{ getCalificacionValue('nonexistinence.motivation_calificacion') }}
        </div>
      </div>
    </div>
    <!-- Aqui empieza el formulario para la insuficiencia -->
    <div [hidden]="evaluacionForm.get('motivationType')?.value !== 'insufficiency'" formGroupName="insufficiency">
      <h2 class="titulo">Insuficiencia</h2>
      <!-- Fundamentacion normatica en insuficiencia -->
      <h3 class="titulo">Fundamentación normativa</h3>
      <div>
        <h4 class="titulo-eva">¿Carece totalmente de fundamentación normativa?</h4>
        <label>
          <input type="radio" 
                 [value]="'Si'" 
                 [checked]="isRadioSelected('lackFoundationNormative', 'Si')" 
                 (change)="setRadioValue('lackFoundationNormative', 'Si')" 
                 formControlName="lackFoundationNormative"> Si
      </label>
      <label>
          <input type="radio" 
                 [value]="'No'" 
                 [checked]="isRadioSelected('lackFoundationNormative', 'No')" 
                 (change)="setRadioValue('lackFoundationNormative', 'No')" 
                 formControlName="lackFoundationNormative"> No
      </label>      
      </div>
      <div>
        <app-caja-texto name="reasonsNormative" formControlName="reasonsNormative" [disabled]="evaluacionForm.disabled"
          [titulo]="'¿Por qué?'"></app-caja-texto>
        <div *ngIf="!isDocente && getRetroalimentacionValue('insufficiency.normative_retroalimentacion')">
          <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
            {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
          </button>
          <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
            <div class="retroalimentacion-texto">
              {{ getRetroalimentacionValue('insufficiency.normative_retroalimentacion') }}
            </div>
          </div>
        </div>
      </div>
      <button class="rate" *ngIf="isDocente" type="button"
        (click)="toggleCalificar('insufficiency.reasonsNormative')">Calificar</button>
      <div *ngIf="calificarState['insufficiency.reasonsNormative']">
        <div class="bttns-rate">
          <button class="correct-button"
            [class.calificacion-correcta]="isButtonSelected('insufficiency', 'normative_calificacion', 'Correcto')"
            type="button" (click)="selectButton('insufficiency', 'normative_calificacion', 'Correcto')">
            Correcto
          </button>
          <button class="incorrect-button"
            [class.calificacion-incorrecta]="isButtonSelected('insufficiency', 'normative_calificacion', 'Incorrecto')"
            type="button" (click)="selectButton('insufficiency', 'normative_calificacion', 'Incorrecto')">
            Incorrecto
          </button>
        </div>
        <div>
          <app-caja-texto formControlName="normative_retroalimentacion" [titulo]="'Retroalimentación'"></app-caja-texto>
        </div>
      </div>
      <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
        <div class="calificacion-display" [ngClass]="{
          'calificacion-correcta': getCalificacionValue('insufficiency.normative_calificacion') === 'Correcto',
          'calificacion-incorrecta': getCalificacionValue('insufficiency.normative_calificacion') === 'Incorrecto',
          'calificacion-no-calificado': getCalificacionValue('insufficiency.normative_calificacion') === 'No Calificado'
        }">
          {{ getCalificacionValue('insufficiency.normative_calificacion') }}
        </div>
      </div>
      <hr>
      <!-- Fundamentacion fatica en inuficiencia -->
      <h3 class="titulo">Fundamentación fáctica</h3>
      <div>
        <h4 class="titulo-eva">¿Carece totalmente de fundamentación fáctica?</h4>
        <label>
          <input type="radio" 
                 [value]="'Si'" 
                 [checked]="isRadioSelected('lackFoundationFactual', 'Si')" 
                 (change)="setRadioValue('lackFoundationFactual', 'Si')" 
                 formControlName="lackFoundationFactual"> Si
      </label>
      <label>
          <input type="radio" 
                 [value]="'No'" 
                 [checked]="isRadioSelected('lackFoundationFactual', 'No')" 
                 (change)="setRadioValue('lackFoundationFactual', 'No')" 
                 formControlName="lackFoundationFactual"> No
      </label>      
      </div>
      <div>
        <app-caja-texto name="reasonsFactual" formControlName="reasonsFactual" [disabled]="evaluacionForm.disabled"
          [titulo]="'¿Por qué?'">
        </app-caja-texto>
        <div *ngIf="!isDocente && getRetroalimentacionValue('insufficiency.factual_retroalimentacion')">
          <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
            {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
          </button>
          <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
            <div class="retroalimentacion-texto">
              {{ getRetroalimentacionValue('insufficiency.factual_retroalimentacion') }}
            </div>
          </div>
        </div>
      </div>
      <button class="rate" *ngIf="isDocente" type="button"
        (click)="toggleCalificar('insufficiency.reasonsFactual')">Calificar</button>
      <div *ngIf="calificarState['insufficiency.reasonsFactual']">
        <div class="bttns-rate">
          <button class="correct-button" type="button"
            [class.calificacion-correcta]="isButtonSelected('insufficiency', 'factual_calificacion', 'Correcto')"
            (click)="selectButton('insufficiency', 'factual_calificacion', 'Correcto')">Correcto</button>
          <button class="incorrect-button" type="button"
            [class.calificacion-incorrecta]="isButtonSelected('insufficiency', 'factual_calificacion', 'Incorrecto')"
            (click)="selectButton('insufficiency', 'factual_calificacion', 'Incorrecto')">Incorrecto</button>
        </div>
        <div>
          <div>
            <app-caja-texto formControlName="factual_retroalimentacion" [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
      </div>
      <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
        <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('insufficiency.factual_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('insufficiency.factual_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('insufficiency.factual_calificacion') === 'No Calificado'
          }">
          {{ getCalificacionValue('insufficiency.factual_calificacion') }}
        </div>
      </div>
      <hr>
      <!-- Deficit de motivacion en insuficiencia -->
      <div>
        <h3 class="titulo">Señale si la sentencia analizada debe ser anulada por déficit de motivación</h3>
        <label>
          <input type="radio" 
                 [value]="'Si'" 
                 [checked]="isRadioSelected('lackMotivation', 'Si')" 
                 (change)="setRadioValue('lackMotivation', 'Si')" 
                 formControlName="lackMotivation"> Si
      </label>
      <label>
          <input type="radio" 
                 [value]="'No'" 
                 [checked]="isRadioSelected('lackMotivation', 'No')" 
                 (change)="setRadioValue('lackMotivation', 'No')" 
                 formControlName="lackMotivation"> No
      </label>
            </div>
      <div>
        <app-caja-texto name="reasonsMotivation" formControlName="reasonsMotivation"
          [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
        </app-caja-texto>
        <div *ngIf="!isDocente && getRetroalimentacionValue('insufficiency.motivation_retroalimentacion')">
          <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
            {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
          </button>
          <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
            <div class="retroalimentacion-texto">
              {{ getRetroalimentacionValue('insufficiency.motivation_retroalimentacion') }}
            </div>
          </div>
        </div>
      </div>
      <button class="rate" *ngIf="isDocente" type="button"
        (click)="toggleCalificar('insufficiency.reasonsMotivation')">Calificar</button>
      <div *ngIf="calificarState['insufficiency.reasonsMotivation']">
        <div class="bttns-rate">
          <button class="correct-button" type="button"
            [class.calificacion-correcta]="isButtonSelected('insufficiency', 'motivation_calificacion', 'Correcto')"
            (click)="selectButton('insufficiency', 'motivation_calificacion', 'Correcto')">Correcto</button>
          <button class="incorrect-button" type="button"
            [class.calificacion-incorrecta]="isButtonSelected('insufficiency', 'motivation_calificacion', 'Incorrecto')"
            (click)="selectButton('insufficiency', 'motivation_calificacion', 'Incorrecto')">Incorrecto</button>
        </div>
        <div>
          <app-caja-texto formControlName="motivation_retroalimentacion"
            [titulo]="'Retroalimentación'"></app-caja-texto>
        </div>
      </div>

      <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
        <div class="calificacion-display" [ngClass]="{
          'calificacion-correcta': getCalificacionValue('insufficiency.motivation_calificacion') === 'Correcto',
          'calificacion-incorrecta': getCalificacionValue('insufficiency.motivation_calificacion') === 'Incorrecto',
          'calificacion-no-calificado': getCalificacionValue('insufficiency.motivation_calificacion') === 'No Calificado'
        }">
          {{ getCalificacionValue('insufficiency.motivation_calificacion') }}
        </div>
      </div>
    </div>
    <!-- Aqui empieza el formulario de apariencia -->
    <div [hidden]="evaluacionForm.get('motivationType')?.value !== 'appearance'" formGroupName="appearance">
      <h2 class="titulo">Apariencia</h2>
      <h5 class="titulo">En caso de señalar Sí en este tipo de deficiencia motivacional, proceda a identificar uno de
        los vicios
        motivacionales de la apariencia que constan a continuación.</h5>
        <!-- Razón de la apariencia -->
        <app-caja-texto name="appearanceReason" formControlName="appearanceReason"
        [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
      </app-caja-texto>
         <!-- Opciones de la apariencia -->
      <div class="appearance-options">
        <h3 class="titulo">Vicios motivacionales</h3>
        <h5 class="titulo ">En caso de identificar vicios motivacionales, seleccione solamente uno de ellos</h5>
        <div class="options">
          <input type="radio" name="motivationalHabit" value="incoherence" formControlName="motivationalHabit">
          Incoherencia
          <input type="radio" name="motivationalHabit" value="inatinence" formControlName="motivationalHabit">
          Inatinencia
          <input type="radio" name="motivationalHabit" value="incomprehensibility" formControlName="motivationalHabit">
          Incomprensibilidad
          <input type="radio" name="motivationalHabit" value="incongruity" formControlName="motivationalHabit">
          Incongruencia
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.motivationalHabit')">Calificar</button>
        <div *ngIf="calificarState['appearance.motivationalHabit']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance', 'motivationalHabit_calificacion', 'Correcto')"
              type="button" (click)="selectButton('appearance', 'motivationalHabit_calificacion', 'Correcto')">
              Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance', 'motivationalHabit_calificacion', 'Incorrecto')"
              type="button" (click)="selectButton('appearance', 'motivationalHabit_calificacion', 'Incorrecto')">
              Incorrecto</button>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.motivationalHabit_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.motivationalHabit_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.motivationalHabit_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.motivationalHabit_calificacion') }}
          </div>
        </div>
      </div>

      <div *ngIf="evaluacionForm.get('appearance')?.get('motivationalHabit')?.value === 'incoherence'"
        formGroupName="incoherence">
        <h3 class="titulo">Incoherencia</h3>
        <h3 class="titulo">Fundamentación Jurídica</h3>
        <div>
          <h4 class="titulo-eva">¿Existe incoherencia lógica normativa?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsLogicalNormative', 'Si')" 
                   (change)="setRadioValue('existsLogicalNormative', 'Si')" 
                   formControlName="existsLogicalNormative"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsLogicalNormative', 'No')" 
                   (change)="setRadioValue('existsLogicalNormative', 'No')" 
                   formControlName="existsLogicalNormative"> No
        </label>
                </div>
        <div>
          <app-caja-texto name="reasonsLogicaNormative" formControlName="reasonsLogicaNormative"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incoherence.logicaNormative_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incoherence.logicaNormative_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incoherence')">Calificar</button>
        <div *ngIf="calificarState['appearance.incoherence']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incoherence', 'logicaNormative_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'logicaNormative_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incoherence', 'logicaNormative_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'logicaNormative_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="logicaNormative_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.incoherence.logicaNormative_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.incoherence.logicaNormative_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.incoherence.logicaNormative_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.incoherence.logicaNormative_calificacion') }}
          </div>
        </div>

        <div>
          <h4 class="titulo-eva">¿Existe incoherencia decisional normativa?</h4>
          <input type="radio" name="existsDecisionalNormative" value="Si" formControlName="existsDecisionalNormative">
          Si
          <input type="radio" name="existsDecisionalNormative" value="No" formControlName="existsDecisionalNormative">
          No
        </div>
        <div>
          <app-caja-texto name="reasonsDecisionalNormative" formControlName="reasonsDecisionalNormative"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incoherence.decisionalNormative_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incoherence.decisionalNormative_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incoherence')">Calificar</button>
        <div *ngIf="calificarState['appearance.incoherence']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incoherence', 'decisionalNormative_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'decisionalNormative_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incoherence', 'decisionalNormative_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'decisionalNormative_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="decisionalNormative_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.incoherence.decisionalNormative_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.incoherence.decisionalNormative_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.incoherence.decisionalNormative_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.incoherence.decisionalNormative_calificacion') }}
          </div>
        </div>

        <h3 class="titulo">Fundamentación Fáctica</h3>
        <div>
          <h4 class="titulo-eva">¿Existe incoherencia lógica fáctica?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsLogicalFactual', 'Si')" 
                   (change)="setRadioValue('existsLogicalFactual', 'Si')" 
                   formControlName="existsLogicalFactual"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsLogicalFactual', 'No')" 
                   (change)="setRadioValue('existsLogicalFactual', 'No')" 
                   formControlName="existsLogicalFactual"> No
        </label>
                </div>
        <div>
          <app-caja-texto name="reasonsLogicalFactual" formControlName="reasonsLogicalFactual"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incoherence.logicalFactual_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incoherence.logicalFactual_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incoherence')">Calificar</button>
        <div *ngIf="calificarState['appearance.incoherence']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incoherence', 'logicalFactual_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'logicalFactual_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incoherence', 'logicalFactual_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'logicalFactual_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="logicalFactual_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.incoherence.logicalFactual_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.incoherence.logicalFactual_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.incoherence.logicalFactual_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.incoherence.logicalFactual_calificacion') }}
          </div>
        </div>

        <div>
          <h4 class="titulo-eva">¿Existe incoherencia decisional fáctica?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsDecisionalFactual', 'Si')" 
                   (change)="setRadioValue('existsDecisionalFactual', 'Si')" 
                   formControlName="existsDecisionalFactual"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsDecisionalFactual', 'No')" 
                   (change)="setRadioValue('existsDecisionalFactual', 'No')" 
                   formControlName="existsDecisionalFactual"> No
        </label>
                </div>
        <div>
          <app-caja-texto name="reasonsDecisionalFactual" formControlName="reasonsDecisionalFactual"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incoherence.decisionalFactual_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incoherence.decisionalFactual_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incoherence')">Calificar</button>
        <div *ngIf="calificarState['appearance.incoherence']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incoherence', 'decisionalFactual_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'decisionalFactual_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incoherence', 'decisionalFactual_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'decisionalFactual_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="decisionalFactual_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>

        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.incoherence.decisionalFactual_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.incoherence.decisionalFactual_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.incoherence.decisionalFactual_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.incoherence.decisionalFactual_calificacion') }}
          </div>
        </div>

        <div>
          <h4 class="titulo-eva">Señale si la sentencia analizada debe ser anulada por déficit de motivación</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('lackMotivation', 'Si')" 
                   (change)="setRadioValue('lackMotivation', 'Si')" 
                   formControlName="lackMotivation"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('lackMotivation', 'No')" 
                   (change)="setRadioValue('lackMotivation', 'No')" 
                   formControlName="lackMotivation"> No
        </label>
                </div>
        <div>
          <app-caja-texto name="reasonsMotivation" formControlName="reasonsMotivation"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incoherence.motivation_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incoherence.motivation_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incoherence')">Calificar</button>
        <div *ngIf="calificarState['appearance.incoherence']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incoherence', 'motivation_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'motivation_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incoherence', 'motivation_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incoherence', 'motivation_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="motivation_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.incoherence.motivation_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.incoherence.motivation_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.incoherence.motivation_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.incoherence.motivation_calificacion') }}
          </div>
        </div>
      </div>

      <div *ngIf="evaluacionForm.get('appearance')?.get('motivationalHabit')?.value === 'inatinence'"
        formGroupName="inatinence">
        <h3 class="titulo">Inanitencia</h3>
        <h3 class="titulo">Fundamentación Jurídica</h3>
        <div>
          <h4 class="titulo-eva">¿Se esgrimen razones jurídicas que no “tienen que ver” con el punto controvertido?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsInatinenceJuridical', 'Si')" 
                   (change)="setRadioValue('existsInatinenceJuridical', 'Si')" 
                   formControlName="existsInatinenceJuridical"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsInatinenceJuridical', 'No')" 
                   (change)="setRadioValue('existsInatinenceJuridical', 'No')" 
                   formControlName="existsInatinenceJuridical"> No
        </label>
        
        </div>
        <div>
          <app-caja-texto name="reasonsInatinenceJuridical" formControlName="reasonsInatinenceJuridical"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.inatinence.inatinenceJuridical_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.inatinence.inatinenceJuridical_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.inatinence')">Calificar</button>
        <div *ngIf="calificarState['appearance.inatinence']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.inatinence', 'inatinenceJuridical_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.inatinence', 'inatinenceJuridical_calificacion', 'Correcto')">
              Correcto
            </button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.inatinence', 'inatinenceJuridical_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.inatinence', 'inatinenceJuridical_calificacion', 'Incorrecto')">
              Incorrecto
            </button>
          </div>
          <div>
            <app-caja-texto formControlName="inatinenceJuridical_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>

        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.inatinence.inatinenceJuridical_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.inatinence.inatinenceJuridical_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.inatinence.inatinenceJuridical_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.inatinence.inatinenceJuridical_calificacion') }}
          </div>
        </div>


        <h3 class="titulo">Fundamentación fáctica</h3>
        <div>
          <h4 class="titulo-eva">¿Se esgrimen razones fácticas que no “tienen que ver” con el punto controvertido?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsInatinenceFactual', 'Si')" 
                   (change)="setRadioValue('existsInatinenceFactual', 'Si')" 
                   formControlName="existsInatinenceFactual"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsInatinenceFactual', 'No')" 
                   (change)="setRadioValue('existsInatinenceFactual', 'No')" 
                   formControlName="existsInatinenceFactual"> No
        </label>
                </div>
        <div>
          <app-caja-texto name="reasonsInatinenceFactual" formControlName="reasonsInatinenceFactual"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.inatinence.inatinenceFactual_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.inatinence.inatinenceFactual_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.inatinence')">Calificar</button>
        <div *ngIf="calificarState['appearance.inatinence']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.inatinence', 'inatinenceFactual_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.inatinence', 'inatinenceFactual_calificacion', 'Correcto')">
              Correcto
            </button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.inatinence', 'inatinenceFactual_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.inatinence', 'inatinenceFactual_calificacion', 'Incorrecto')">
              Incorrecto
            </button>
          </div>
          <div>
            <app-caja-texto formControlName="inatinenceFactual_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.inatinence.inatinenceFactual_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.inatinence.inatinenceFactual_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.inatinence.inatinenceFactual_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.inatinence.inatinenceFactual_calificacion') }}
          </div>
        </div>
      </div>

      <div *ngIf="evaluacionForm.get('appearance')?.get('motivationalHabit')?.value === 'incomprehensibility'"
        formGroupName="incomprehensibility">
        <h3 class="titulo">Incomprensibilidad</h3>
        <h3 class="titulo">Fundamentación Jurídica</h3>
        <div>
          <h4 class="titulo-eva">¿Existen fragmentos de la sentencia que no son razonablemente inteligibles
            para un profesional del derecho ciudadano?</h4>
          <input type="radio" name="existsIncomprehensibilityJuridical" value="Si"
            formControlName="existsIncomprehensibilityJuridical">
          Si
          <input type="radio" name="existsIncomprehensibilityJuridical" value="No"
            formControlName="existsIncomprehensibilityJuridical">
          No
        </div>
        <div>
          <app-caja-texto name="reasonsIncomprehensibilityJuridical" [disabled]="evaluacionForm.disabled"
            formControlName="reasonsIncomprehensibilityJuridical" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incomprehensibility.incomprehensibilityJuridical_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incomprehensibility.incomprehensibilityJuridical_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incomprehensibility')">Calificar</button>
        <div *ngIf="calificarState['appearance.incomprehensibility']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incomprehensibility', 'incomprehensibilityJuridical_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incomprehensibility', 'incomprehensibilityJuridical_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incomprehensibility', 'incomprehensibilityJuridical_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incomprehensibility', 'incomprehensibilityJuridical_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="incomprehensibilityJuridical_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.incomprehensibility.incomprehensibilityJuridical_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.incomprehensibility.incomprehensibilityJuridical_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.incomprehensibility.incomprehensibilityJuridical_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.incomprehensibility.incomprehensibilityJuridical_calificacion') }}
          </div>
        </div>


        <h3 class="titulo">Fundamentación fáctica</h3>
        <div>
          <h4 class="titulo-eva">¿Existen fragmentos de la sentencia que no son razonablemente inteligibles
            para un profesional del derecho ciudadano?</h4>
            <label>
              <input type="radio" 
                     [value]="'Si'" 
                     [checked]="isRadioSelected('existsIncomprehensibilityFactual', 'Si')" 
                     (change)="setRadioValue('existsIncomprehensibilityFactual', 'Si')" 
                     formControlName="existsIncomprehensibilityFactual"> Si
          </label>
          <label>
              <input type="radio" 
                     [value]="'No'" 
                     [checked]="isRadioSelected('existsIncomprehensibilityFactual', 'No')" 
                     (change)="setRadioValue('existsIncomprehensibilityFactual', 'No')" 
                     formControlName="existsIncomprehensibilityFactual"> No
          </label>
          
        </div>
        <div>
          <app-caja-texto name="reasonsIncomprehensibilityFactual" formControlName="reasonsIncomprehensibilityFactual"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incomprehensibility.incomprehensibilityFactual_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incomprehensibility.incomprehensibilityFactual_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incomprehensibility')">Calificar</button>
        <div *ngIf="calificarState['appearance.incomprehensibility']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incomprehensibility', 'incomprehensibilityFactual_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incomprehensibility', 'incomprehensibilityFactual_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incomprehensibility', 'incomprehensibilityFactual_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incomprehensibility', 'incomprehensibilityFactual_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="incomprehensibilityFactual_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>

        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.incomprehensibility.incomprehensibilityFactual_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.incomprehensibility.incomprehensibilityFactual_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.incomprehensibility.incomprehensibilityFactual_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.incomprehensibility.incomprehensibilityFactual_calificacion') }}
          </div>
        </div>
      </div>

      <div *ngIf="evaluacionForm.get('appearance')?.get('motivationalHabit')?.value === 'incongruity'"
        formGroupName="incongruity">
        <h3 class="titulo">Incongruencia</h3>
        <h3 class="titulo ">Fundamentación Jurídica</h3>
        <div>
          <h4 class="titulo-eva">¿Existe incongruencia normativa frente a las partes?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsIncongruityNormativeParticipants', 'Si')" 
                   (change)="setRadioValue('existsIncongruityNormativeParticipants', 'Si')" 
                   formControlName="existsIncongruityNormativeParticipants"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsIncongruityNormativeParticipants', 'No')" 
                   (change)="setRadioValue('existsIncongruityNormativeParticipants', 'No')" 
                   formControlName="existsIncongruityNormativeParticipants"> No
        </label>
        
        </div>
        <div>
          <app-caja-texto name="reasonsIncongruityNormativeParticipants" [disabled]="evaluacionForm.disabled"
            formControlName="reasonsIncongruityNormativeParticipants" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incongruity.normativeParticipants_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incongruity.normativeParticipants_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incongruity')">Calificar</button>
        <div *ngIf="calificarState['appearance.incongruity']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incongruity', 'normativeParticipants_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incongruity', 'normativeParticipants_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incongruity', 'normativeParticipants_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incongruity', 'normativeParticipants_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="normativeParticipants_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('appearance.incongruity.normativeParticipants_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('appearance.incongruity.normativeParticipants_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('appearance.incongruity.normativeParticipants_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('appearance.incongruity.normativeParticipants_calificacion') }}
          </div>
        </div>

        <div>
          <h4 class="titulo-eva">¿Existe incongruencia normativa frente al derecho?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsIncongruityNormativeLaw', 'Si')" 
                   (change)="setRadioValue('existsIncongruityNormativeLaw', 'Si')" 
                   formControlName="existsIncongruityNormativeLaw"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsIncongruityNormativeLaw', 'No')" 
                   (change)="setRadioValue('existsIncongruityNormativeLaw', 'No')" 
                   formControlName="existsIncongruityNormativeLaw"> No
        </label>
        
        </div>
        <div>
          <app-caja-texto name="reasonsIncongruityNormativeLaw" formControlName="reasonsIncongruityNormativeLaw"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incongruity.normativeLaw_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incongruity.normativeLaw_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incongruity')">Calificar</button>
        <div *ngIf="calificarState['appearance.incongruity']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incongruity', 'normativeLaw_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incongruity', 'normativeLaw_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incongruity', 'normativeLaw_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incongruity', 'normativeLaw_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="normativeLaw_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('normativeLaw_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('normativeLaw_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('normativeLaw_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('normativeLaw_calificacion') }}
          </div>
        </div>

        <h3 class="titulo">Fundamentación fáctica</h3>
        <div>
          <h4 class="titulo-eva">¿Existe incongruencia fáctica frente a las partes?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsIncongruityFactualParticipants', 'Si')" 
                   (change)="setRadioValue('existsIncongruityFactualParticipants', 'Si')" 
                   formControlName="existsIncongruityFactualParticipants"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsIncongruityFactualParticipants', 'No')" 
                   (change)="setRadioValue('existsIncongruityFactualParticipants', 'No')" 
                   formControlName="existsIncongruityFactualParticipants"> No
        </label>
        
        </div>
        <div>
          <app-caja-texto name="reasonsIncongruityFactualParticipants" [disabled]="evaluacionForm.disabled"
            formControlName="reasonsIncongruityFactualParticipants" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incongruity.factualParticipants_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incongruity.factualParticipants_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incongruity')">Calificar</button>
        <div *ngIf="calificarState['appearance.incongruity']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incongruity', 'factualParticipants_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incongruity', 'factualParticipants_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incongruity', 'factualParticipants_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incongruity', 'factualParticipants_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="factualParticipants_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('factualParticipants_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('factualParticipants_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('factualParticipants_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('factualParticipants_calificacion') }}
          </div>
        </div>

        <div>
          <h4 class="titulo-eva ">¿Existe incongruencia fáctica frente al derecho?</h4>
          <label>
            <input type="radio" 
                   [value]="'Si'" 
                   [checked]="isRadioSelected('existsIncongruityFactualLaw', 'Si')" 
                   (change)="setRadioValue('existsIncongruityFactualLaw', 'Si')" 
                   formControlName="existsIncongruityFactualLaw"> Si
        </label>
        <label>
            <input type="radio" 
                   [value]="'No'" 
                   [checked]="isRadioSelected('existsIncongruityFactualLaw', 'No')" 
                   (change)="setRadioValue('existsIncongruityFactualLaw', 'No')" 
                   formControlName="existsIncongruityFactualLaw"> No
        </label>
        
        </div>
        <div>
          <app-caja-texto name="reasonsIncongruityFactualLaw" formControlName="reasonsIncongruityFactualLaw"
            [disabled]="evaluacionForm.disabled" [titulo]="'¿Por qué?'">
          </app-caja-texto>
          <div *ngIf="!isDocente && getRetroalimentacionValue('appearance.incongruity.factualLaw_retroalimentacion')">
            <button type="button" (click)="toggleRetroalimentacion('sentenceSubject')" class="bttn-toggle">
              {{ mostrarRetroalimentacion['sentenceSubject'] ? 'Ocultar' : 'Ver' }} retroalimentación
            </button>
            <div *ngIf="mostrarRetroalimentacion['sentenceSubject']" class="retroalimentacion-contenido">
              <div class="retroalimentacion-texto">
                {{ getRetroalimentacionValue('appearance.incongruity.factualLaw_retroalimentacion') }}
              </div>
            </div>
          </div>
        </div>
        <button class="rate" *ngIf="isDocente" type="button"
          (click)="toggleCalificar('appearance.incongruity')">Calificar</button>
        <div *ngIf="calificarState['appearance.incongruity']">
          <div class="bttns-rate">
            <button class="correct-button"
              [class.calificacion-correcta]="isButtonSelected('appearance.incongruity', 'factualLaw_calificacion', 'Correcto')"
              type="button"
              (click)="selectButton('appearance.incongruity', 'factualLaw_calificacion', 'Correcto')">Correcto</button>
            <button class="incorrect-button"
              [class.calificacion-incorrecta]="isButtonSelected('appearance.incongruity', 'factualLaw_calificacion', 'Incorrecto')"
              type="button"
              (click)="selectButton('appearance.incongruity', 'factualLaw_calificacion', 'Incorrecto')">Incorrecto</button>
          </div>
          <div>
            <app-caja-texto formControlName="factualLaw_retroalimentacion"
              [titulo]="'Retroalimentación'"></app-caja-texto>
          </div>
        </div>
        <div *ngIf="!isDocente && evaluacionForm.get('saved')?.value" class="calificaciones">
          <div class="calificacion-display" [ngClass]="{
            'calificacion-correcta': getCalificacionValue('factualLaw_calificacion') === 'Correcto',
            'calificacion-incorrecta': getCalificacionValue('factualLaw_calificacion') === 'Incorrecto',
            'calificacion-no-calificado': getCalificacionValue('factualLaw_calificacion') === 'No Calificado'
          }">
            {{ getCalificacionValue('factualLaw_calificacion') }}
          </div>
        </div>
      </div>
    </div>
    <button class="bttn-stnd-g" type="submit">Guardar</button>
  </form>
  <div *ngIf="mostrarMensaje" class="alerta">
    <p>{{ mensajeError }}</p>
  </div>
</div>

<div class="bttn">
  <button class="bttn-stnd" (click)="redirectToAnalisis2()">Análisis</button>
  <button class="custom-button" type="button" *ngIf="cargando">
    <div class="spinner"></div>
    <span class="button-text">Cargando...</span>
  </button>
  <button class="bttn-stnd"  (click)="redirectToEvaluacion2($event)">Siguiente</button>
</div>

